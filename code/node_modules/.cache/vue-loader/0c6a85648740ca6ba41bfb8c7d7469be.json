{"remainingRequest":"C:\\Users\\zyj\\paas-front\\code\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\zyj\\paas-front\\code\\src\\views\\ManageContainer.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\zyj\\paas-front\\code\\src\\views\\ManageContainer.vue","mtime":1601088102770},{"path":"C:\\Users\\zyj\\paas-front\\code\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1600762068352},{"path":"C:\\Users\\zyj\\paas-front\\code\\node_modules\\babel-loader\\lib\\index.js","mtime":1600762068012},{"path":"C:\\Users\\zyj\\paas-front\\code\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1600762068352},{"path":"C:\\Users\\zyj\\paas-front\\code\\node_modules\\vue-loader\\lib\\index.js","mtime":1600762094690}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBtb3VudGVkKCkgew0KICAgIGF4aW9zLmdldCgiaHR0cDovLzEwLjI1MS4yNTMuMTg4OjgwODAvY29udGFpbmVycy9hbGwiKS50aGVuKChyZXMpID0+IHsNCiAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsNCiAgICAgIHRoaXMuYmFjayA9IHJlcy5kYXRhOw0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJhY2subGVuZ3RoOyBpKyspIHsNCiAgICAgICAgLy8gICBjb25zb2xlLmxvZyggdGhpcy5iYWNrW2ldLkltYWdlKTsNCg0KICAgICAgICBheGlvcw0KICAgICAgICAgIC5nZXQoImh0dHA6Ly8xMC4yNTEuMjUzLjE4ODo4MDgwL3VzZXIvZ2V0VXNlcm5hbWUvIiArIHRoaXMuYmFja1tpXS5JZCkNCiAgICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgICBsZXQgdG1wRGF0YSA9IHt9Ow0KICAgICAgICAgICAgdG1wRGF0YS5vd24gPSByZXMuZGF0YTsNCiAgICAgICAgICAgIHRtcERhdGEubmFtZSA9IHRoaXMuYmFja1tpXS5OYW1lc1swXS5yZXBsYWNlKCIvIiwiIik7DQogICAgICAgICAgICB0bXBEYXRhLm1pcnJvciA9IHRoaXMuYmFja1tpXS5JbWFnZTsNCiAgICAgICAgICAgIC8vICAgY29uc29sZS5sb2coJ2FhYScgKyAiICIgKyB0aGlzLmJhY2tbaV0uUG9ydHMubGVuZ3RoKTsNCiAgICAgICAgICAgIHRtcERhdGEucG9ydCA9IFtdOw0KICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmJhY2tbaV0uUG9ydHMubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgICAgdG1wRGF0YS5wb3J0W2pdID0NCiAgICAgICAgICAgICAgICAiezEwLjI1MS4yNTMuMTg5OiIgKw0KICAgICAgICAgICAgICAgIHRoaXMuYmFja1tpXS5Qb3J0c1tqXS5QdWJsaWNQb3J0ICsNCiAgICAgICAgICAgICAgICAiLT4iICsNCiAgICAgICAgICAgICAgICB0aGlzLmJhY2tbaV0uUG9ydHNbal0uUHJpdmF0ZVBvcnQgKw0KICAgICAgICAgICAgICAgICIvIiArDQogICAgICAgICAgICAgICAgdGhpcy5iYWNrW2ldLlBvcnRzW2pdLlR5cGUgKw0KICAgICAgICAgICAgICAgICJ9IjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRtcERhdGEuaWQgPSB0aGlzLmJhY2tbaV0uSWQ7DQogICAgICAgICAgICB0bXBEYXRhLnN0YXR1cyA9IHRoaXMuYmFja1tpXS5TdGF0ZTsNCiAgICAgICAgICAgIHRoaXMuZGF0YS5wdXNoKHRtcERhdGEpOw0KICAgICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0pOw0KICB9LA0KICBuYW1lOiAiTWFuYWdlQ29udGFpbmVyIiwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgY29uTGlzdDogW3t9XSwNCiAgICAgIGNvbHVtbnM6IFsNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAiTmFtZSIsDQogICAgICAgICAga2V5OiAibmFtZSIsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB0aXRsZTogIk93bmVyIiwNCiAgICAgICAgICBrZXk6ICJvd24iLA0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgdGl0bGU6ICJJbWFnZSIsDQogICAgICAgICAga2V5OiAibWlycm9yIiwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAiUG9ydCIsDQogICAgICAgICAga2V5OiAicG9ydCIsDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB0aXRsZTogIlN0YXR1cyIsDQogICAgICAgICAga2V5OiAic3RhdHVzIiwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAiQWN0aW9uIiwNCiAgICAgICAgICBzbG90OiAiYWN0aW9uIiwNCiAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgIH0sDQogICAgICBdLA0KICAgICAgZGF0YTogW10sDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHR1cm5vbihyKSB7DQogICAgICBjb25zb2xlLmxvZyhyLmlkKTsNCiAgICAgIGF4aW9zDQogICAgICAgIC5nZXQoImh0dHA6Ly8xMC4yNTEuMjUzLjE4ODo4MDgwL2NvbnRhaW5lcnMvc3RhcnQvIiArIHIuaWQpDQogICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi5byA5ZCv5oiQ5YqfIik7DQogICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgdHVybm9mZihyLCBpKSB7DQogICAgICBjb25zb2xlLmxvZyhyLmlkKTsNCiAgICAgIGNvbnNvbGUubG9nKGkpOw0KICAgICAgYXhpb3MNCiAgICAgICAgLmdldCgiaHR0cDovLzEwLjI1MS4yNTMuMTg4OjgwODAvY29udGFpbmVycy9zdG9wLyIgKyByLmlkKQ0KICAgICAgICAudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsNCiAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoIuWFs+mXreaIkOWKnyIpOw0KICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOw0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIHJlbW92ZShyKSB7DQogICAgICBjb25zb2xlLmxvZygiYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYSIrci5pZCk7DQogICAgICBheGlvcw0KICAgICAgICAuZ2V0KCJodHRwOi8vMTAuMjUxLjI1My4xODg6ODA4MC9jb250YWluZXJzL3JlbW92ZS8iICsgci5pZCkNCiAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKCJiYmJiYmJiYmJiYmJiYmJiIityZXMpOw0KICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi5Yig6Zmk5oiQ5YqfIik7DQogICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7DQogICAgICAgIH0pOw0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["ManageContainer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ManageContainer.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"manage-container\">\r\n    <div class=\"layout-breadcrumb\">\r\n      <Breadcrumb style=\"float: left\">\r\n        <BreadcrumbItem></BreadcrumbItem>\r\n        <BreadcrumbItem to=\"/\">首页</BreadcrumbItem>\r\n        <BreadcrumbItem>管理容器</BreadcrumbItem>\r\n      </Breadcrumb>\r\n      <br>\r\n      <h2 style=\"font-weight: bold\">管理容器</h2>\r\n    </div>\r\n    <div class=\"layout-content\">\r\n      <Card style=\"margin-top: 30px; \">\r\n        <Table border :columns=\"columns\" :data=\"data\">\r\n          <template slot-scope=\"{ row }\" slot=\"name\">\r\n            <strong>{{ row.name }}</strong>\r\n          </template>\r\n          <template slot-scope=\"{ row, index }\" slot=\"action\">\r\n            <Button\r\n              v-if=\"row.status == 'running'\"\r\n              type=\"error\"\r\n              size=\"small\"\r\n              style=\"margin-right: 5px\"\r\n              @click=\"turnoff(row, index)\"\r\n              >关闭</Button\r\n            >\r\n            <Button\r\n              v-if=\"row.status != 'running'\"\r\n              type=\"primary\"\r\n              size=\"small\"\r\n              style=\"margin-right: 5px\"\r\n              @click=\"turnon(row)\"\r\n              >开启</Button\r\n            >\r\n            <Button :disabled=\"row.status=='running'\" type=\"error\" size=\"small\" @click=\"remove(row)\">删除</Button>\r\n          </template>\r\n        </Table>\r\n      </Card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n  mounted() {\r\n    axios.get(\"http://10.251.253.188:8080/containers/all\").then((res) => {\r\n      console.log(res.data);\r\n      this.back = res.data;\r\n      for (let i = 0; i < this.back.length; i++) {\r\n        //   console.log( this.back[i].Image);\r\n\r\n        axios\r\n          .get(\"http://10.251.253.188:8080/user/getUsername/\" + this.back[i].Id)\r\n          .then((res) => {\r\n            let tmpData = {};\r\n            tmpData.own = res.data;\r\n            tmpData.name = this.back[i].Names[0].replace(\"/\",\"\");\r\n            tmpData.mirror = this.back[i].Image;\r\n            //   console.log('aaa' + \" \" + this.back[i].Ports.length);\r\n            tmpData.port = [];\r\n            for (let j = 0; j < this.back[i].Ports.length; j++) {\r\n              tmpData.port[j] =\r\n                \"{10.251.253.189:\" +\r\n                this.back[i].Ports[j].PublicPort +\r\n                \"->\" +\r\n                this.back[i].Ports[j].PrivatePort +\r\n                \"/\" +\r\n                this.back[i].Ports[j].Type +\r\n                \"}\";\r\n            }\r\n            tmpData.id = this.back[i].Id;\r\n            tmpData.status = this.back[i].State;\r\n            this.data.push(tmpData);\r\n          });\r\n      }\r\n    });\r\n  },\r\n  name: \"ManageContainer\",\r\n  data() {\r\n    return {\r\n      conList: [{}],\r\n      columns: [\r\n        {\r\n          title: \"Name\",\r\n          key: \"name\",\r\n        },\r\n        {\r\n          title: \"Owner\",\r\n          key: \"own\",\r\n        },\r\n        {\r\n          title: \"Image\",\r\n          key: \"mirror\",\r\n        },\r\n        {\r\n          title: \"Port\",\r\n          key: \"port\",\r\n        },\r\n        {\r\n          title: \"Status\",\r\n          key: \"status\",\r\n        },\r\n        {\r\n          title: \"Action\",\r\n          slot: \"action\",\r\n          align: \"center\",\r\n        },\r\n      ],\r\n      data: [],\r\n    };\r\n  },\r\n  methods: {\r\n    turnon(r) {\r\n      console.log(r.id);\r\n      axios\r\n        .get(\"http://10.251.253.188:8080/containers/start/\" + r.id)\r\n        .then((res) => {\r\n          console.log(res);\r\n          this.$Message.success(\"开启成功\");\r\n          location.reload();\r\n        });\r\n    },\r\n    turnoff(r, i) {\r\n      console.log(r.id);\r\n      console.log(i);\r\n      axios\r\n        .get(\"http://10.251.253.188:8080/containers/stop/\" + r.id)\r\n        .then((res) => {\r\n          console.log(res);\r\n          this.$Message.success(\"关闭成功\");\r\n          location.reload();\r\n        });\r\n    },\r\n    remove(r) {\r\n      console.log(\"aaaaaaaaaaaaaaaaaaaaaaaaa\"+r.id);\r\n      axios\r\n        .get(\"http://10.251.253.188:8080/containers/remove/\" + r.id)\r\n        .then((res) => {\r\n          console.log(\"bbbbbbbbbbbbbbbb\"+res);\r\n          this.$Message.success(\"删除成功\");\r\n          location.reload();\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped></style>\r\n"]}]}