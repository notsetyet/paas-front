{"remainingRequest":"C:\\Users\\zyj\\paas-front\\code\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\zyj\\paas-front\\code\\src\\views\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\zyj\\paas-front\\code\\src\\views\\login.vue","mtime":1600825449072},{"path":"C:\\Users\\zyj\\paas-front\\code\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1600762068352},{"path":"C:\\Users\\zyj\\paas-front\\code\\node_modules\\babel-loader\\lib\\index.js","mtime":1600762068012},{"path":"C:\\Users\\zyj\\paas-front\\code\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1600762068352},{"path":"C:\\Users\\zyj\\paas-front\\code\\node_modules\\vue-loader\\lib\\index.js","mtime":1600762094690}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiTG9naW4iLA0KICBpbmplY3Q6IFsiZnJlc2giXSwNCg0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBsb2dpbkluZm86IHsNCiAgICAgICAgdGFwVmFsdWU6ICJsb2dpbiIsDQogICAgICAgIHVzZXJOYW1lOiAiIiwNCiAgICAgICAgcGFzc1dvcmQ6ICIiLA0KICAgICAgfSwNCiAgICAgIHJlZ2lzdGVySW5mbzogew0KICAgICAgICB1c2VyTmFtZTogIiIsDQogICAgICAgIHBhc3NXb3JkOiAiIiwNCiAgICAgICAgcmVwZWF0OiAiIiwNCiAgICAgIH0sDQogICAgfTsNCiAgfSwNCiAgLyogYmVmb3JlQ3JlYXRlKCkgew0KICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnYmFja2dyb3VuZC1jb2xvcjojZDFjZmZmJyk7DQogICAgICAgIH0sDQogICAgICAgIGJlZm9yZURlc3Ryb3koKSB7DQogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jykuc2V0QXR0cmlidXRlKCdzdHlsZScsICdiYWNrZ3JvdW5kLWNvbG9yOiMqKionKTsNCiAgICAgICAgfSwqLw0KICBtb3VudGVkKCkgew0KICAgIGNvbnNvbGUubG9nKCJtb3VudGVkIik7DQogICAgLy9sb2NhbFN0b3JhZ2UuY2xlYXIoKTsNCiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJuYW1lIikgIT0gbnVsbCkgew0KICAgICAgdGhpcy4kTWVzc2FnZS5zdWNjZXNzKA0KICAgICAgICAi55So5oi3IiArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VybmFtZSIpICsgIuW3sumqjOivgSDoh6rliqjot7PovazpppbpobUiDQogICAgICApOw0KICAgICAgdGhpcy5nb1BhZ2UoKTsNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBnb1BhZ2U6IGZ1bmN0aW9uKCkgew0KICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpOw0KICAgICAgdGhpcy50aW1lciA9IHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAvL+iuvue9ruW7tui/n+aJp+ihjA0KICAgICAgICBjb25zb2xlLmxvZygib2siKTsNCiAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7DQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsNCiAgICAgICAgICBwYXRoOiAiLyIsDQogICAgICAgICAgcXVlcnk6IHt9LA0KICAgICAgICB9KTsNCiAgICAgIH0sIDE2MDApOw0KICAgIH0sDQogICAgbG9naW46IGZ1bmN0aW9uKCkgew0KICAgICAgaWYgKHRoaXMubG9naW5JbmZvLnVzZXJOYW1lID09ICIiIHx8IHRoaXMubG9naW5JbmZvLnBhc3NXb3JkID09ICIiKSB7DQogICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoIuivt+i+k+WFpeeUqOaIt+WQjeWSjOWvhueggSIpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgYXhpb3MNCiAgICAgICAgICAucG9zdCgiaHR0cDovLzEwLjEyOC4yNy42OTo4MDgwL2xvZ2luIiwgbnVsbCwgew0KICAgICAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLmxvZ2luSW5mby51c2VyTmFtZSwNCiAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMubG9naW5JbmZvLnBhc3NXb3JkLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICB9KQ0KICAgICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlICE9IDIwMCkgew0KICAgICAgICAgICAgICBhbGVydCgi55m75b2V5aSx6LSlIik7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLnN1Y2Nlc3MoIueZu+W9leaIkOWKnyIpOw0KICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidWlkIiwgcmVzLmRhdGEuaWQpOw0KICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlcm5hbWUiLCB0aGlzLmxvZ2luSW5mby51c2VyTmFtZSk7DQogICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1dHlwZSIsIHJlcy5kYXRhLnR5cGUpOw0KICAgICAgICAgICAgICB0aGlzLmdvUGFnZSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7DQogICAgICAgICAgICBhbGVydCgi572R57uc6ZSZ6K+vIOivt+mHjeivlToiICsgZXJyb3IpOw0KICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcigi572R57uc6ZSZ6K+vIOivt+mHjeivlSIpOw0KICAgICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogICAgLy/ms6jlhowNCiAgICBzaWduOiBmdW5jdGlvbigpIHsNCiAgICAgIGlmICgNCiAgICAgICAgdGhpcy5yZWdpc3RlckluZm8udXNlck5hbWUgPT0gIiIgfHwNCiAgICAgICAgdGhpcy5yZWdpc3RlckluZm8ucGFzc1dvcmQgPT0gIiINCiAgICAgICkgew0KICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKCLnlKjmiLflkI3lkozlr4bnoIHkuI3og73kuLrnqboiKTsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfQ0KICAgICAgaWYgKHRoaXMucmVnaXN0ZXJJbmZvLnVzZXJOYW1lLmxlbmd0aCA+IDE2KSB7DQogICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoIueUqOaIt+WQjeWkqumVvyDor7fkuI3opoHotoXov4cxNuS4quWtl+espiIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBpZiAodGhpcy5yZWdpc3RlckluZm8udXNlck5hbWUubGVuZ3RoIDwgNikgew0KICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKCLnlKjmiLflkI3lpKrnn60g6K+35LiN6KaB5bCR5LqONuS4quWtl+espiIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICB2YXIgemcgPSAvXlthLXpBLVowLTldezYsMTZ9JC87DQogICAgICBpZiAoIXpnLnRlc3QodGhpcy5yZWdpc3RlckluZm8udXNlck5hbWUpKSB7DQogICAgICAgIHRoaXMuJE1lc3NhZ2UuZXJyb3IoIueUqOaIt+WQjeWMheWQq+aVsOWtl+Wtl+avjeS7peWklueahOmdnuazleWtl+espiIpOw0KICAgICAgICByZXR1cm47DQogICAgICB9IGVsc2Ugew0KICAgICAgICBpZiAodGhpcy5yZWdpc3RlckluZm8ucGFzc1dvcmQgIT0gdGhpcy5yZWdpc3RlckluZm8ucmVwZWF0KSB7DQogICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcigi5Lik5qyh5a+G56CB6L6T5YWl5LiN5LiA6Ie0Iik7DQogICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9DQoNCiAgICAgICAgYXhpb3MNCiAgICAgICAgICAucG9zdCgiaHR0cDovLzEwLjEyOC4yNy42OTo4MDgwL3JlZ2lzdGVyIiwgbnVsbCwgew0KICAgICAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnJlZ2lzdGVySW5mby51c2VyTmFtZSwNCiAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucmVnaXN0ZXJJbmZvLnBhc3NXb3JkLA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICB9KQ0KICAgICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5kYXRhKTsNCiAgICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlICE9IDIwMCkgew0KICAgICAgICAgICAgICB0aGlzLiRNZXNzYWdlLmVycm9yKCLor6XnlKjmiLflkI3lt7Lms6jlhozvvIEiKTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHRoaXMuJE1lc3NhZ2Uuc3VjY2Vzcygi5rOo5YaM5oiQ5YqfIOi9rOWFpeeZu+W9leeVjOmdoiIpOw0KICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7DQogICAgICAgICAgICAgIHRoaXMudGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVySW5mby5wYXNzV29yZCA9ICIiOw0KICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJJbmZvLnVzZXJOYW1lID0gIiI7DQogICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlckluZm8ucmVwZWF0ID0gIiI7DQogICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlckluZm8uZW1haWwgPSAiIjsNCiAgICAgICAgICAgICAgICB0aGlzLmxvZ2luSW5mby50YXBWYWx1ZSA9ICJsb2dpbiI7DQogICAgICAgICAgICAgIH0sIDE1MDApOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uKGVycm9yKSB7DQogICAgICAgICAgICBhbGVydCgi572R57uc6ZSZ6K+vIOivt+mHjeivlToiICsgZXJyb3IpOw0KICAgICAgICAgICAgdGhpcy4kTWVzc2FnZS5lcnJvcigi572R57uc6ZSZ6K+vIOivt+mHjeivlSIpOw0KICAgICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"layout-content\">\r\n    <div class=\"login\">\r\n      <Card class=\"loginCard\">\r\n        <Tabs v-model=\"loginInfo.tapValue\">\r\n          <TabPane label=\"登录\" name=\"login\">\r\n            <Form :model=\"loginInfo\" :label-width=\"80\">\r\n              <img src=\"../../public/title.png\" id=\"pic\" />\r\n              <p class=\"tip1\" v-show=\"loginInfo.showtip\">{{ loginInfo.tip }}</p>\r\n              <FormItem class=\"namebox\" label=\"用户名\"\r\n                ><Input type=\"text\" class=\"name\" v-model=\"loginInfo.userName\"\r\n              /></FormItem>\r\n              <FormItem label=\"密码\"\r\n                ><Input\r\n                  type=\"password\"\r\n                  class=\"password\"\r\n                  v-model=\"loginInfo.passWord\"\r\n              /></FormItem>\r\n              <FormItem\r\n                ><Button class=\"button\" v-on:click=\"login\" type=\"primary\"\r\n                  >登录</Button\r\n                ></FormItem\r\n              >\r\n            </Form>\r\n          </TabPane>\r\n          <TabPane label=\"注册\" name=\"register\">\r\n            <Form :model=\"registerInfo\" :label-width=\"80\">\r\n              <FormItem label=\"用户名\">\r\n                <Input\r\n                  class=\"name\"\r\n                  v-model=\"registerInfo.userName\"\r\n                  placeholder=\"用户名不能包含数字和字母以外的字符，长度为6-16\"\r\n                />\r\n              </FormItem>\r\n\r\n              <FormItem label=\"邮箱\"\r\n                ><Input\r\n                  class=\"password\"\r\n                  type=\"email\"\r\n                  v-model=\"registerInfo.email\"\r\n              /></FormItem>\r\n              <FormItem label=\"密码\"\r\n                ><Input\r\n                  class=\"password\"\r\n                  type=\"password\"\r\n                  v-model=\"registerInfo.passWord\"\r\n              /></FormItem>\r\n              <FormItem label=\"确认密码\"\r\n                ><Input\r\n                  class=\"password\"\r\n                  type=\"password\"\r\n                  v-model=\"registerInfo.repeat\"\r\n              /></FormItem>\r\n              <FormItem\r\n                ><Button class=\"button\" v-on:click=\"sign\" type=\"primary\"\r\n                  >注册</Button\r\n                ></FormItem\r\n              >\r\n            </Form>\r\n          </TabPane>\r\n        </Tabs>\r\n      </Card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n  name: \"Login\",\r\n  inject: [\"fresh\"],\r\n\r\n  data() {\r\n    return {\r\n      loginInfo: {\r\n        tapValue: \"login\",\r\n        userName: \"\",\r\n        passWord: \"\",\r\n      },\r\n      registerInfo: {\r\n        userName: \"\",\r\n        passWord: \"\",\r\n        repeat: \"\",\r\n      },\r\n    };\r\n  },\r\n  /* beforeCreate() {\r\n            document.querySelector('body').setAttribute('style', 'background-color:#d1cfff');\r\n        },\r\n        beforeDestroy() {\r\n            document.querySelector('body').setAttribute('style', 'background-color:#***');\r\n        },*/\r\n  mounted() {\r\n    console.log(\"mounted\");\r\n    //localStorage.clear();\r\n    if (localStorage.getItem(\"username\") != null) {\r\n      this.$Message.success(\r\n        \"用户\" + localStorage.getItem(\"username\") + \"已验证 自动跳转首页\"\r\n      );\r\n      this.goPage();\r\n    }\r\n  },\r\n  methods: {\r\n    goPage: function() {\r\n      clearTimeout(this.timer);\r\n      this.timer = setTimeout(() => {\r\n        //设置延迟执行\r\n        console.log(\"ok\");\r\n        location.reload();\r\n        this.$router.push({\r\n          path: \"/\",\r\n          query: {},\r\n        });\r\n      }, 1600);\r\n    },\r\n    login: function() {\r\n      if (this.loginInfo.userName == \"\" || this.loginInfo.passWord == \"\") {\r\n        this.$Message.error(\"请输入用户名和密码\");\r\n      } else {\r\n        axios\r\n          .post(\"http://10.128.27.69:8080/login\", null, {\r\n            params: {\r\n              username: this.loginInfo.userName,\r\n              password: this.loginInfo.passWord,\r\n            },\r\n          })\r\n          .then((res) => {\r\n            if (res.data.code != 200) {\r\n              alert(\"登录失败\");\r\n            } else {\r\n              this.$Message.success(\"登录成功\");\r\n              localStorage.setItem(\"uid\", res.data.id);\r\n              localStorage.setItem(\"username\", this.loginInfo.userName);\r\n              localStorage.setItem(\"utype\", res.data.type);\r\n              this.goPage();\r\n            }\r\n          })\r\n          .catch(function(error) {\r\n            alert(\"网络错误 请重试:\" + error);\r\n            this.$Message.error(\"网络错误 请重试\");\r\n          });\r\n      }\r\n    },\r\n    //注册\r\n    sign: function() {\r\n      if (\r\n        this.registerInfo.userName == \"\" ||\r\n        this.registerInfo.passWord == \"\"\r\n      ) {\r\n        this.$Message.error(\"用户名和密码不能为空\");\r\n        return;\r\n      }\r\n      if (this.registerInfo.userName.length > 16) {\r\n        this.$Message.error(\"用户名太长 请不要超过16个字符\");\r\n        return;\r\n      }\r\n      if (this.registerInfo.userName.length < 6) {\r\n        this.$Message.error(\"用户名太短 请不要少于6个字符\");\r\n        return;\r\n      }\r\n      var zg = /^[a-zA-Z0-9]{6,16}$/;\r\n      if (!zg.test(this.registerInfo.userName)) {\r\n        this.$Message.error(\"用户名包含数字字母以外的非法字符\");\r\n        return;\r\n      } else {\r\n        if (this.registerInfo.passWord != this.registerInfo.repeat) {\r\n          this.$Message.error(\"两次密码输入不一致\");\r\n          return;\r\n        }\r\n\r\n        axios\r\n          .post(\"http://10.128.27.69:8080/register\", null, {\r\n            params: {\r\n              username: this.registerInfo.userName,\r\n              password: this.registerInfo.passWord,\r\n            },\r\n          })\r\n          .then((res) => {\r\n            console.log(res.data);\r\n            if (res.data.code != 200) {\r\n              this.$Message.error(\"该用户名已注册！\");\r\n            } else {\r\n              this.$Message.success(\"注册成功 转入登录界面\");\r\n              clearTimeout(this.timer);\r\n              this.timer = setTimeout(() => {\r\n                this.registerInfo.passWord = \"\";\r\n                this.registerInfo.userName = \"\";\r\n                this.registerInfo.repeat = \"\";\r\n                this.registerInfo.email = \"\";\r\n                this.loginInfo.tapValue = \"login\";\r\n              }, 1500);\r\n            }\r\n          })\r\n          .catch(function(error) {\r\n            alert(\"网络错误 请重试:\" + error);\r\n            this.$Message.error(\"网络错误 请重试\");\r\n          });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#pic {\r\n  margin-top: 2.5rem;\r\n}\r\n.fillWidth {\r\n  position: fixed;\r\n  right: 0;\r\n  bottom: 0;\r\n  min-width: 100%;\r\n  min-height: 100%;\r\n  width: auto;\r\n  height: auto;\r\n  z-index: -100;\r\n  -webkit-filter: grayscale(20%);\r\n}\r\n.loginCard {\r\n  width: 40%;\r\n  margin-left: 20%;\r\n  margin-top: 0;\r\n  /*margin-bottom: 11rem;*/\r\n  length: 30%;\r\n}\r\n.namebox {\r\n  margin-top: 3rem;\r\n}\r\n.name {\r\n  width: 70%;\r\n  margin-left: -15%;\r\n}\r\n.password {\r\n  width: 70%;\r\n  margin-left: -15%;\r\n}\r\n.tip1 {\r\n  font-weight: bold;\r\n  color: #2365ff;\r\n  margin-top: 1rem;\r\n}\r\n.tip {\r\n  font-weight: bold;\r\n  color: #2365ff;\r\n}\r\n.hint {\r\n  height: 0.1rem;\r\n  font-weight: bold;\r\n  font-style: italic;\r\n  font-size: 0.0025rem;\r\n  color: #2365ff;\r\n}\r\n#tip2 {\r\n  margin-top: 0.875rem;\r\n  margin-left: -4.375rem;\r\n}\r\n#teacher {\r\n  margin-left: -4.625rem;\r\n}\r\n.button {\r\n  margin-left: -15%;\r\n  width: 70%;\r\n}\r\n</style>\r\n"]}]}