{"remainingRequest":"C:\\Users\\zyj\\paas-front\\code\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\zyj\\paas-front\\code\\src\\views\\login.vue?vue&type=style&index=0&id=7589b93f&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\zyj\\paas-front\\code\\src\\views\\login.vue","mtime":1600825449072},{"path":"C:\\Users\\zyj\\paas-front\\code\\node_modules\\css-loader\\dist\\cjs.js","mtime":1600762070719},{"path":"C:\\Users\\zyj\\paas-front\\code\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1600762094690},{"path":"C:\\Users\\zyj\\paas-front\\code\\node_modules\\postcss-loader\\src\\index.js","mtime":1600762085460},{"path":"C:\\Users\\zyj\\paas-front\\code\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1600762068352},{"path":"C:\\Users\\zyj\\paas-front\\code\\node_modules\\vue-loader\\lib\\index.js","mtime":1600762094690}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCiNwaWMgew0KICBtYXJnaW4tdG9wOiAyLjVyZW07DQp9DQouZmlsbFdpZHRoIHsNCiAgcG9zaXRpb246IGZpeGVkOw0KICByaWdodDogMDsNCiAgYm90dG9tOiAwOw0KICBtaW4td2lkdGg6IDEwMCU7DQogIG1pbi1oZWlnaHQ6IDEwMCU7DQogIHdpZHRoOiBhdXRvOw0KICBoZWlnaHQ6IGF1dG87DQogIHotaW5kZXg6IC0xMDA7DQogIC13ZWJraXQtZmlsdGVyOiBncmF5c2NhbGUoMjAlKTsNCn0NCi5sb2dpbkNhcmQgew0KICB3aWR0aDogNDAlOw0KICBtYXJnaW4tbGVmdDogMjAlOw0KICBtYXJnaW4tdG9wOiAwOw0KICAvKm1hcmdpbi1ib3R0b206IDExcmVtOyovDQogIGxlbmd0aDogMzAlOw0KfQ0KLm5hbWVib3ggew0KICBtYXJnaW4tdG9wOiAzcmVtOw0KfQ0KLm5hbWUgew0KICB3aWR0aDogNzAlOw0KICBtYXJnaW4tbGVmdDogLTE1JTsNCn0NCi5wYXNzd29yZCB7DQogIHdpZHRoOiA3MCU7DQogIG1hcmdpbi1sZWZ0OiAtMTUlOw0KfQ0KLnRpcDEgew0KICBmb250LXdlaWdodDogYm9sZDsNCiAgY29sb3I6ICMyMzY1ZmY7DQogIG1hcmdpbi10b3A6IDFyZW07DQp9DQoudGlwIHsNCiAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogIGNvbG9yOiAjMjM2NWZmOw0KfQ0KLmhpbnQgew0KICBoZWlnaHQ6IDAuMXJlbTsNCiAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogIGZvbnQtc3R5bGU6IGl0YWxpYzsNCiAgZm9udC1zaXplOiAwLjAwMjVyZW07DQogIGNvbG9yOiAjMjM2NWZmOw0KfQ0KI3RpcDIgew0KICBtYXJnaW4tdG9wOiAwLjg3NXJlbTsNCiAgbWFyZ2luLWxlZnQ6IC00LjM3NXJlbTsNCn0NCiN0ZWFjaGVyIHsNCiAgbWFyZ2luLWxlZnQ6IC00LjYyNXJlbTsNCn0NCi5idXR0b24gew0KICBtYXJnaW4tbGVmdDogLTE1JTsNCiAgd2lkdGg6IDcwJTsNCn0NCg=="},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"layout-content\">\r\n    <div class=\"login\">\r\n      <Card class=\"loginCard\">\r\n        <Tabs v-model=\"loginInfo.tapValue\">\r\n          <TabPane label=\"登录\" name=\"login\">\r\n            <Form :model=\"loginInfo\" :label-width=\"80\">\r\n              <img src=\"../../public/title.png\" id=\"pic\" />\r\n              <p class=\"tip1\" v-show=\"loginInfo.showtip\">{{ loginInfo.tip }}</p>\r\n              <FormItem class=\"namebox\" label=\"用户名\"\r\n                ><Input type=\"text\" class=\"name\" v-model=\"loginInfo.userName\"\r\n              /></FormItem>\r\n              <FormItem label=\"密码\"\r\n                ><Input\r\n                  type=\"password\"\r\n                  class=\"password\"\r\n                  v-model=\"loginInfo.passWord\"\r\n              /></FormItem>\r\n              <FormItem\r\n                ><Button class=\"button\" v-on:click=\"login\" type=\"primary\"\r\n                  >登录</Button\r\n                ></FormItem\r\n              >\r\n            </Form>\r\n          </TabPane>\r\n          <TabPane label=\"注册\" name=\"register\">\r\n            <Form :model=\"registerInfo\" :label-width=\"80\">\r\n              <FormItem label=\"用户名\">\r\n                <Input\r\n                  class=\"name\"\r\n                  v-model=\"registerInfo.userName\"\r\n                  placeholder=\"用户名不能包含数字和字母以外的字符，长度为6-16\"\r\n                />\r\n              </FormItem>\r\n\r\n              <FormItem label=\"邮箱\"\r\n                ><Input\r\n                  class=\"password\"\r\n                  type=\"email\"\r\n                  v-model=\"registerInfo.email\"\r\n              /></FormItem>\r\n              <FormItem label=\"密码\"\r\n                ><Input\r\n                  class=\"password\"\r\n                  type=\"password\"\r\n                  v-model=\"registerInfo.passWord\"\r\n              /></FormItem>\r\n              <FormItem label=\"确认密码\"\r\n                ><Input\r\n                  class=\"password\"\r\n                  type=\"password\"\r\n                  v-model=\"registerInfo.repeat\"\r\n              /></FormItem>\r\n              <FormItem\r\n                ><Button class=\"button\" v-on:click=\"sign\" type=\"primary\"\r\n                  >注册</Button\r\n                ></FormItem\r\n              >\r\n            </Form>\r\n          </TabPane>\r\n        </Tabs>\r\n      </Card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n  name: \"Login\",\r\n  inject: [\"fresh\"],\r\n\r\n  data() {\r\n    return {\r\n      loginInfo: {\r\n        tapValue: \"login\",\r\n        userName: \"\",\r\n        passWord: \"\",\r\n      },\r\n      registerInfo: {\r\n        userName: \"\",\r\n        passWord: \"\",\r\n        repeat: \"\",\r\n      },\r\n    };\r\n  },\r\n  /* beforeCreate() {\r\n            document.querySelector('body').setAttribute('style', 'background-color:#d1cfff');\r\n        },\r\n        beforeDestroy() {\r\n            document.querySelector('body').setAttribute('style', 'background-color:#***');\r\n        },*/\r\n  mounted() {\r\n    console.log(\"mounted\");\r\n    //localStorage.clear();\r\n    if (localStorage.getItem(\"username\") != null) {\r\n      this.$Message.success(\r\n        \"用户\" + localStorage.getItem(\"username\") + \"已验证 自动跳转首页\"\r\n      );\r\n      this.goPage();\r\n    }\r\n  },\r\n  methods: {\r\n    goPage: function() {\r\n      clearTimeout(this.timer);\r\n      this.timer = setTimeout(() => {\r\n        //设置延迟执行\r\n        console.log(\"ok\");\r\n        location.reload();\r\n        this.$router.push({\r\n          path: \"/\",\r\n          query: {},\r\n        });\r\n      }, 1600);\r\n    },\r\n    login: function() {\r\n      if (this.loginInfo.userName == \"\" || this.loginInfo.passWord == \"\") {\r\n        this.$Message.error(\"请输入用户名和密码\");\r\n      } else {\r\n        axios\r\n          .post(\"http://10.128.27.69:8080/login\", null, {\r\n            params: {\r\n              username: this.loginInfo.userName,\r\n              password: this.loginInfo.passWord,\r\n            },\r\n          })\r\n          .then((res) => {\r\n            if (res.data.code != 200) {\r\n              alert(\"登录失败\");\r\n            } else {\r\n              this.$Message.success(\"登录成功\");\r\n              localStorage.setItem(\"uid\", res.data.id);\r\n              localStorage.setItem(\"username\", this.loginInfo.userName);\r\n              localStorage.setItem(\"utype\", res.data.type);\r\n              this.goPage();\r\n            }\r\n          })\r\n          .catch(function(error) {\r\n            alert(\"网络错误 请重试:\" + error);\r\n            this.$Message.error(\"网络错误 请重试\");\r\n          });\r\n      }\r\n    },\r\n    //注册\r\n    sign: function() {\r\n      if (\r\n        this.registerInfo.userName == \"\" ||\r\n        this.registerInfo.passWord == \"\"\r\n      ) {\r\n        this.$Message.error(\"用户名和密码不能为空\");\r\n        return;\r\n      }\r\n      if (this.registerInfo.userName.length > 16) {\r\n        this.$Message.error(\"用户名太长 请不要超过16个字符\");\r\n        return;\r\n      }\r\n      if (this.registerInfo.userName.length < 6) {\r\n        this.$Message.error(\"用户名太短 请不要少于6个字符\");\r\n        return;\r\n      }\r\n      var zg = /^[a-zA-Z0-9]{6,16}$/;\r\n      if (!zg.test(this.registerInfo.userName)) {\r\n        this.$Message.error(\"用户名包含数字字母以外的非法字符\");\r\n        return;\r\n      } else {\r\n        if (this.registerInfo.passWord != this.registerInfo.repeat) {\r\n          this.$Message.error(\"两次密码输入不一致\");\r\n          return;\r\n        }\r\n\r\n        axios\r\n          .post(\"http://10.128.27.69:8080/register\", null, {\r\n            params: {\r\n              username: this.registerInfo.userName,\r\n              password: this.registerInfo.passWord,\r\n            },\r\n          })\r\n          .then((res) => {\r\n            console.log(res.data);\r\n            if (res.data.code != 200) {\r\n              this.$Message.error(\"该用户名已注册！\");\r\n            } else {\r\n              this.$Message.success(\"注册成功 转入登录界面\");\r\n              clearTimeout(this.timer);\r\n              this.timer = setTimeout(() => {\r\n                this.registerInfo.passWord = \"\";\r\n                this.registerInfo.userName = \"\";\r\n                this.registerInfo.repeat = \"\";\r\n                this.registerInfo.email = \"\";\r\n                this.loginInfo.tapValue = \"login\";\r\n              }, 1500);\r\n            }\r\n          })\r\n          .catch(function(error) {\r\n            alert(\"网络错误 请重试:\" + error);\r\n            this.$Message.error(\"网络错误 请重试\");\r\n          });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n#pic {\r\n  margin-top: 2.5rem;\r\n}\r\n.fillWidth {\r\n  position: fixed;\r\n  right: 0;\r\n  bottom: 0;\r\n  min-width: 100%;\r\n  min-height: 100%;\r\n  width: auto;\r\n  height: auto;\r\n  z-index: -100;\r\n  -webkit-filter: grayscale(20%);\r\n}\r\n.loginCard {\r\n  width: 40%;\r\n  margin-left: 20%;\r\n  margin-top: 0;\r\n  /*margin-bottom: 11rem;*/\r\n  length: 30%;\r\n}\r\n.namebox {\r\n  margin-top: 3rem;\r\n}\r\n.name {\r\n  width: 70%;\r\n  margin-left: -15%;\r\n}\r\n.password {\r\n  width: 70%;\r\n  margin-left: -15%;\r\n}\r\n.tip1 {\r\n  font-weight: bold;\r\n  color: #2365ff;\r\n  margin-top: 1rem;\r\n}\r\n.tip {\r\n  font-weight: bold;\r\n  color: #2365ff;\r\n}\r\n.hint {\r\n  height: 0.1rem;\r\n  font-weight: bold;\r\n  font-style: italic;\r\n  font-size: 0.0025rem;\r\n  color: #2365ff;\r\n}\r\n#tip2 {\r\n  margin-top: 0.875rem;\r\n  margin-left: -4.375rem;\r\n}\r\n#teacher {\r\n  margin-left: -4.625rem;\r\n}\r\n.button {\r\n  margin-left: -15%;\r\n  width: 70%;\r\n}\r\n</style>\r\n"]}]}